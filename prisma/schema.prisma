generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") // I charge the .loc.env that's  is not .env so That create a mistake
}

model User {
  UserId         String      @id @default(cuid())
  watchlistCoins Watchlist[] @relation("UserWatchlist")
}

model Coin {
  id                              String   @id @default(uuid())
  symbol                          String
  name                            String
  image                           String
  current_price                   Float
  market_cap                      Float
  market_cap_rank                 Int
  fully_diluted_valuation         Float
  total_volume                    Float
  high_24h                        Float
  low_24h                         Float
  price_change_24h                Float
  price_change_percentage_24h     Float
  market_cap_change_24h           Float
  market_cap_change_percentage_24h Float
  circulating_supply              Float
  total_supply                    Float
  max_supply                      Float?
  ath                             Float
  ath_change_percentage           Float
  ath_date                        String
  atl                             Float
  atl_change_percentage           Float
  atl_date                        String
  roi                             Json?
  last_updated                    String
  price_change_percentage_1h_in_currency Float
  price_change_percentage_7d      Float
  price_change_percentage_30d     Float
  price_change_percentage_1y      Float
  watchlistUsers Watchlist[] @relation("CoinWatchlist")
}

model Watchlist {
  id     String @id @default(uuid())
  userId String
  coinId String
  user   User   @relation(fields: [userId], references: [UserId], onDelete: Cascade, name: "UserWatchlist")
  coin   Coin   @relation(fields: [coinId], references: [id], onDelete: Cascade, name: "CoinWatchlist")

  @@unique([userId, coinId])
}
